* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Cormorant Garamond', serif;
    background: hsl(270, 50%, 8%);
    color: hsl(45, 30%, 90%);
    min-height: 100vh;
    overflow: hidden;
}

.container {
    position: relative;
    width: 100vw;
    height: 100vh;
    background: linear-gradient(to top, hsl(275, 45%, 12%), hsl(270, 60%, 6%));
    overflow: hidden;
}

/* Stars */
.star {
    position: absolute;
    width: 3px;
    height: 3px;
    background: hsl(45, 100%, 95%);
    border-radius: 50%;
    animation: twinkle 3s ease-in-out infinite;
}

@keyframes twinkle {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
}

/* Lanterns - Square Chinese style */
.lantern {
    position: absolute;
    width: 100px;
    height: 120px;
    filter: drop-shadow(0 0 30px hsl(40, 95%, 60%)) drop-shadow(0 0 60px hsla(40, 95%, 60%, 0.7));
    z-index: 10;
    will-change: transform;
}

/* Background floating lanterns */
.background-lanterns {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 5;
}

.bg-lantern {
    position: absolute;
    opacity: 0.35;
    filter: drop-shadow(0 0 12px hsl(40, 95%, 60%)) drop-shadow(0 0 25px hsla(40, 95%, 60%, 0.3));
}

.bg-lantern-1 { width: 40px; height: 50px; bottom: -60px; left: 5%; animation: bgLanternRise1 14s ease-in forwards infinite; }
.bg-lantern-2 { width: 35px; height: 45px; bottom: -70px; left: 12%; animation: bgLanternRise2 16s ease-in forwards infinite; }
.bg-lantern-3 { width: 45px; height: 55px; bottom: -50px; left: 22%; animation: bgLanternRise3 18s ease-in forwards infinite; }
.bg-lantern-4 { width: 38px; height: 48px; bottom: -65px; right: 28%; animation: bgLanternRise4 17s ease-in forwards infinite; }
.bg-lantern-5 { width: 42px; height: 52px; bottom: -55px; right: 18%; animation: bgLanternRise5 15s ease-in forwards infinite; }
.bg-lantern-6 { width: 36px; height: 46px; bottom: -75px; right: 8%; animation: bgLanternRise6 19s ease-in forwards infinite; }
.bg-lantern-7 { width: 44px; height: 54px; bottom: -45px; left: 40%; animation: bgLanternRise7 17s ease-in forwards infinite; }
.bg-lantern-8 { width: 39px; height: 49px; bottom: -60px; left: 65%; animation: bgLanternRise8 16s ease-in forwards infinite; }
.bg-lantern-9 { width: 41px; height: 51px; bottom: -70px; left: 80%; animation: bgLanternRise9 18s ease-in forwards infinite; }
.bg-lantern-10 { width: 37px; height: 47px; bottom: -55px; right: 42%; animation: bgLanternRise10 15s ease-in forwards infinite; }

@keyframes bgLanternRise1 { 0% { transform: translateY(0) translateX(0); opacity: 0; } 10% { opacity: 0.25; } 90% { opacity: 0.25; } 100% { transform: translateY(-120vh) translateX(80px); opacity: 0; } }
@keyframes bgLanternRise2 { 0% { transform: translateY(0) translateX(0); opacity: 0; } 10% { opacity: 0.25; } 90% { opacity: 0.25; } 100% { transform: translateY(-120vh) translateX(-60px); opacity: 0; } }
@keyframes bgLanternRise3 { 0% { transform: translateY(0) translateX(0); opacity: 0; } 10% { opacity: 0.25; } 90% { opacity: 0.25; } 100% { transform: translateY(-120vh) translateX(100px); opacity: 0; } }
@keyframes bgLanternRise4 { 0% { transform: translateY(0) translateX(0); opacity: 0; } 10% { opacity: 0.25; } 90% { opacity: 0.25; } 100% { transform: translateY(-120vh) translateX(-90px); opacity: 0; } }
@keyframes bgLanternRise5 { 0% { transform: translateY(0) translateX(0); opacity: 0; } 10% { opacity: 0.25; } 90% { opacity: 0.25; } 100% { transform: translateY(-120vh) translateX(110px); opacity: 0; } }
@keyframes bgLanternRise6 { 0% { transform: translateY(0) translateX(0); opacity: 0; } 10% { opacity: 0.25; } 90% { opacity: 0.25; } 100% { transform: translateY(-120vh) translateX(-80px); opacity: 0; } }
@keyframes bgLanternRise7 { 0% { transform: translateY(0) translateX(0); opacity: 0; } 10% { opacity: 0.25; } 90% { opacity: 0.25; } 100% { transform: translateY(-120vh) translateX(70px); opacity: 0; } }
@keyframes bgLanternRise8 { 0% { transform: translateY(0) translateX(0); opacity: 0; } 10% { opacity: 0.25; } 90% { opacity: 0.25; } 100% { transform: translateY(-120vh) translateX(-70px); opacity: 0; } }
@keyframes bgLanternRise9 { 0% { transform: translateY(0) translateX(0); opacity: 0; } 10% { opacity: 0.25; } 90% { opacity: 0.25; } 100% { transform: translateY(-120vh) translateX(90px); opacity: 0; } }
@keyframes bgLanternRise10 { 0% { transform: translateY(0) translateX(0); opacity: 0; } 10% { opacity: 0.25; } 90% { opacity: 0.25; } 100% { transform: translateY(-120vh) translateX(-100px); opacity: 0; } }

.lantern-1 {
    left: 15%;
    bottom: -120px;
}

.lantern-2 {
    right: 15%;
    bottom: -120px;
}

.lantern.animate-1 {
    animation: lanternRise1 8s cubic-bezier(0.25, 0.1, 0.25, 1) forwards, lanternGlow 2.5s ease-in-out infinite, lanternSway1 4s ease-in-out infinite;
}

.lantern.animate-2 {
    animation: lanternRise2 8s cubic-bezier(0.25, 0.1, 0.25, 1) forwards, lanternGlow 2.5s ease-in-out infinite 0.5s, lanternSway2 4.5s ease-in-out infinite;
}

@keyframes lanternGlow {
    0%, 100% { filter: drop-shadow(0 0 25px hsl(40, 95%, 60%)) drop-shadow(0 0 50px hsla(40, 95%, 60%, 0.6)); }
    50% { filter: drop-shadow(0 0 35px hsl(40, 95%, 65%)) drop-shadow(0 0 70px hsla(40, 95%, 60%, 0.8)); }
}

@keyframes lanternSway1 {
    0%, 100% { rotate: -5deg; }
    50% { rotate: 8deg; }
}

@keyframes lanternSway2 {
    0%, 100% { rotate: 5deg; }
    50% { rotate: -8deg; }
}

@keyframes lanternRise1 {
    0% { 
    transform: translate(0, 0); 
    bottom: -120px;
    left: 15%;
    }
    15% { 
    transform: translate(5vw, -15vh) rotate(15deg); 
    }
    30% { 
    transform: translate(12vw, -30vh) rotate(-10deg); 
    }
    50% { 
    transform: translate(18vw, -45vh) rotate(12deg); 
    }
    70% { 
    transform: translate(25vw, -55vh) rotate(-8deg); 
    }
    85% { 
    transform: translate(30vw, -58vh) rotate(5deg); 
    }
    100% { 
    transform: translate(35vw, -60vh) rotate(0deg); 
    left: 15%;
    }
}

@keyframes lanternRise2 {
    0% { 
    transform: translate(0, 0); 
    bottom: -120px;
    right: 15%;
    }
    15% { 
    transform: translate(-5vw, -18vh) rotate(-15deg); 
    }
    30% { 
    transform: translate(-12vw, -32vh) rotate(10deg); 
    }
    50% { 
    transform: translate(-18vw, -48vh) rotate(-12deg); 
    }
    70% { 
    transform: translate(-25vw, -56vh) rotate(8deg); 
    }
    85% { 
    transform: translate(-30vw, -59vh) rotate(-5deg); 
    }
    100% { 
    transform: translate(-35vw, -60vh) rotate(0deg); 
    right: 15%;
    }
}

/* Lantern SVG styles */
.lantern-body { fill: hsl(35, 100%, 70%); }
.lantern-glow { fill: hsl(40, 100%, 85%); }
.lantern-frame { fill: hsl(42, 80%, 50%); }
.lantern-inner { fill: hsl(45, 100%, 90%); opacity: 0.9; }

/* Sparkles */
.sparkles {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
    opacity: 0;
    z-index: 15;
}

.sparkles.show {
    opacity: 1;
}

.sparkle {
    position: absolute;
    width: 20px;
    height: 20px;
    animation: sparkle 1.5s ease-out forwards;
}

@keyframes sparkle {
    0% { transform: scale(0) rotate(0deg); opacity: 1; }
    50% { opacity: 1; }
    100% { transform: scale(4) rotate(180deg); opacity: 0; }
}

/* Envelope */
.envelope-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    z-index: 20;
    cursor: pointer;
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.envelope-container:hover {
    transform: translate(-50%, -50%) scale(1.08);
}

.envelope-container.show {
    animation: envelopeAppear 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes envelopeAppear {
    0% { transform: translate(-50%, -50%) scale(0) rotate(-180deg); opacity: 0; }
    60% { transform: translate(-50%, -50%) scale(1.15) rotate(8deg); opacity: 1; }
    80% { transform: translate(-50%, -50%) scale(0.95) rotate(-3deg); }
    100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; }
}

.envelope {
    width: 280px;
    height: 180px;
    position: relative;
    filter: drop-shadow(0 10px 30px hsla(0, 0%, 0%, 0.4));
}

.envelope-back { fill: hsl(35, 45%, 65%); }
.envelope-front { fill: hsl(35, 50%, 75%); }
.envelope-flap { fill: hsl(35, 55%, 80%); }
.envelope-flap-shadow { fill: hsl(35, 40%, 60%); }
.envelope-inner { fill: hsl(35, 60%, 85%); }
.envelope-seal { fill: hsl(275, 60%, 45%); }
.envelope-seal-inner { fill: hsl(275, 50%, 55%); }
.envelope-pattern { stroke: hsl(35, 40%, 55%); fill: none; stroke-width: 1; }
.envelope-ribbon { fill: hsl(275, 60%, 50%); }

.tap-text {
    position: absolute;
    bottom: -35px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 16px;
    font-style: italic;
    color: hsl(45, 30%, 75%);
    animation: pulse 2s ease-in-out infinite;
    white-space: nowrap;
}

@keyframes pulse {
    0%, 100% { opacity: 0.5; transform: translateX(-50%) scale(1); }
    50% { opacity: 1; transform: translateX(-50%) scale(1.05); }
}

/* Letter */
.letter-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: hsla(270, 50%, 8%, 0.95);
    z-index: 30;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.6s ease;
}

.letter-container.show {
    opacity: 1;
    pointer-events: auto;
}

.letter {
    width: 90%;
    max-width: 450px;
    min-height: 600px;
    background: linear-gradient(135deg, hsl(35, 60%, 78%) 0%, hsl(30, 55%, 72%) 25%, hsl(35, 50%, 68%) 50%, hsl(30, 45%, 64%) 75%, hsl(35, 40%, 60%) 100%);
    border-radius: 8px;
    box-shadow: 
    0 40px 80px -20px hsla(0, 0%, 0%, 0.6), 
    0 0 100px hsla(40, 95%, 60%, 0.25),
    inset 0 0 120px hsla(35, 60%, 50%, 0.4),
    inset -2px -2px 10px hsla(30, 40%, 40%, 0.2);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 50px 35px;
    text-align: center;
    transform: scale(0.3) rotate(-10deg);
    opacity: 0;
    transition: transform 1s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.8s ease;
    position: relative;
    overflow: hidden;
}

/* Parchment texture overlay with ornate corners */
.letter::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
    radial-gradient(circle at 8% 8%, hsla(275, 60%, 80%, 0.15) 0%, transparent 25%),
    radial-gradient(circle at 92% 8%, hsla(275, 60%, 80%, 0.15) 0%, transparent 25%),
    radial-gradient(circle at 8% 92%, hsla(275, 60%, 80%, 0.15) 0%, transparent 25%),
    radial-gradient(circle at 92% 92%, hsla(275, 60%, 80%, 0.15) 0%, transparent 25%),
    radial-gradient(ellipse at 20% 20%, hsla(35, 70%, 85%, 0.3) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 80%, hsla(30, 50%, 55%, 0.25) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, hsla(35, 60%, 80%, 0.15) 0%, transparent 70%);
    pointer-events: none;
}

/* Decorative curled edges effect */
.letter::after {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border: 3px solid hsla(30, 40%, 50%, 0.3);
    border-radius: 15px;
    pointer-events: none;
}

.letter-container.show .letter {
    transform: scale(1) rotate(0deg);
    opacity: 1;
}

/* Sun symbol */
.sun-symbol {
    width: 70px;
    height: 70px;
    margin-bottom: 15px;
    filter: drop-shadow(0 2px 8px hsla(40, 90%, 50%, 0.4));
    position: relative;
    z-index: 1;
}

.sun-face { fill: hsl(40, 90%, 55%); }
.sun-rays { fill: hsl(40, 85%, 50%); }
.sun-center { fill: hsl(45, 95%, 65%); }

.letter h1 {
    font-family: 'Great Vibes', cursive;
    font-size: clamp(2.5rem, 10vw, 4rem);
    color: hsl(275, 55%, 32%);
    margin-bottom: 8px;
    text-shadow: 0 3px 6px hsla(275, 50%, 25%, 0.25);
    position: relative;
    z-index: 1;
    letter-spacing: 0.05em;
}

.letter .guest-name {
    font-family: 'Great Vibes', cursive;
    font-size: clamp(2rem, 7vw, 2.8rem);
    color: hsl(275, 45%, 40%);
    margin-bottom: 25px;
    position: relative;
    z-index: 1;
    text-shadow: 0 2px 4px hsla(275, 50%, 30%, 0.15);
}

.letter .message {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(1.05rem, 3.2vw, 1.2rem);
    line-height: 2;
    color: hsl(30, 45%, 28%);
    margin-bottom: 30px;
    font-style: italic;
    position: relative;
    z-index: 1;
    max-width: 90%;
    letter-spacing: 0.02em;
}

.letter .details {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(1rem, 2.8vw, 1.15rem);
    color: hsl(30, 40%, 32%);
    position: relative;
    z-index: 1;
    letter-spacing: 0.01em;
}

.letter .location {
    font-weight: 600;
    color: hsl(275, 50%, 40%);
    margin-top: 12px;
    font-size: clamp(1rem, 2.8vw, 1.2rem);
    text-decoration: none;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-block;
    position: relative;
}

.letter .location:hover {
    color: hsl(275, 60%, 50%);
    transform: scale(1.02);
}

.letter .location:active {
    transform: scale(0.98);
}

/* Purple ribbon decoration */
.ribbon {
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 25px;
    z-index: 2;
}

.ribbon-main { fill: hsl(275, 55%, 50%); }
.ribbon-shadow { fill: hsl(275, 50%, 40%); }
.ribbon-highlight { fill: hsl(275, 60%, 60%); }

/* Decorative flowers */
.flower {
    position: absolute;
    width: 25px;
    height: 25px;
    z-index: 1;
}

.flower-1 { bottom: 30px; right: 25px; transform: rotate(15deg); }
.flower-2 { bottom: 60px; right: 40px; transform: rotate(-20deg); opacity: 0.8; }
.flower-3 { bottom: 45px; left: 30px; transform: rotate(10deg); opacity: 0.7; }

.flower-petal { fill: hsl(275, 60%, 70%); }
.flower-center { fill: hsl(45, 80%, 60%); }

/* Floating particles */
.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: hsl(40, 95%, 60%);
    border-radius: 50%;
    opacity: 0;
    animation: floatUp 12s linear infinite;
}

@keyframes floatUp {
    0% { transform: translateY(0) translateX(0); opacity: 0; }
    10% { opacity: 0.8; }
    90% { opacity: 0.8; }
    100% { transform: translateY(-100vh) translateX(var(--drift)); opacity: 0; }
}

.close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 30px;
    height: 30px;
    border: none;
    background: hsla(275, 50%, 40%, 0.8);
    color: hsl(45, 30%, 90%);
    border-radius: 50%;
    cursor: pointer;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 35;
}

.close-btn:hover {
    background: hsl(275, 50%, 50%);
    transform: scale(1.1);
}

.hidden { display: none; }

/* Audio toggle button */
.audio-toggle-btn {
    position: fixed;
    bottom: 20px;
    left: 20px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: 2px solid hsl(40, 95%, 60%);
    background: hsla(270, 50%, 8%, 0.8);
    color: hsl(40, 95%, 60%);
    cursor: pointer;
    z-index: 40;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.audio-toggle-btn:hover {
    background: hsla(270, 50%, 8%, 0.95);
    border-color: hsl(45, 100%, 75%);
    color: hsl(45, 100%, 75%);
    transform: scale(1.1);
}

.audio-toggle-btn:active {
    transform: scale(0.95);
}

.audio-toggle-btn svg {
    width: 24px;
    height: 24px;
}

.audio-toggle-btn .icon-speaker {
    display: block;
    position: absolute;
}

.audio-toggle-btn .icon-muted {
    display: none;
    position: absolute;
}

.audio-toggle-btn.muted .icon-speaker {
    display: none;
}

.audio-toggle-btn.muted .icon-muted {
    display: block;
}

.audio-toggle-btn.active {
    animation: pulse-glow 2s ease-in-out infinite;
}

@keyframes pulse-glow {
    0%, 100% {
        box-shadow: 0 0 15px hsla(40, 95%, 60%, 0.4);
    }
    50% {
        box-shadow: 0 0 25px hsla(40, 95%, 60%, 0.7);
    }
}

/* Mobile responsive */
@media (max-width: 768px) {
    .audio-toggle-btn {
        width: 45px;
        height: 45px;
        bottom: 15px;
        left: 15px;
    }
    
    .audio-toggle-btn svg {
        width: 20px;
        height: 20px;
    }
}